<!-- Index.html -->
<!DOCTYPE html>
<html>
    <head>
        <title>Webserv 42</title>
        <link rel="icon" href="styles/favicon.png" type="image/x-icon">
        <link rel="stylesheet" type="text/css" href="styles/style.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@700&display=swap" rel="stylesheet">
    </head>
    <body>
        <div class="main-container">
			<h1 class="main-title">Form</h1>
			<div>
				<form id="form"  method="post" enctype="multipart/form-data">
					<input id="input-file" type="file" name="file" accept=".jpg, .png, .txt"/>
					<!-- <label for="file">File</label> -->
					<button id="submit-button" type="submit">Upload File</button>
				</form>
				<button id="delete-button" type="button">Delete File</button>
			</div>
        </div>
        <script>
			const form = document.getElementById("form");
			
			form.addEventListener("submit", function (e) {
				const image_input = document.querySelector('input[type="file"]')
				const form_data = new FormData(form);
				
				e.preventDefault();
				
				fetch("http://127.0.0.1:4243", {
					method: 'POST',
					// headers: {
						// 	'Content-Type': 'application/json',
					// },
					body: form_data,
				})
				.then(response => {
					if (response.ok) {
						return response.json(); // Process the response data as needed
					} else {
						throw new Error('Network response was not ok');
					}
				})
				.then(data => {
					console.log(data); // Handle the response data
				})
				.catch(error => {
					console.error('There was a problem with the fetch operation:', error);
				});
			})
			
			const delete_btn = document.getElementById("delete-button");

			delete_btn.addEventListener("click", function (e) {
				// e.preventDefault();
				fetch("http://127.0.0.1:4243", {
					method: 'DELETE',
					headers: {
						'Content-Type': 'application/json',
					}
				})
				.then(response => {
					if (response.ok) {
						return response.json(); // Process the response data as needed
					} else {
						throw new Error('Network response was not ok');
					}
				})
				.then(data => {
					console.log(data); // Handle the response data
				})
				.catch(error => {
					console.error('There was a problem with the fetch operation:', error);
				});
			})
		</script>
	</body>
</html>